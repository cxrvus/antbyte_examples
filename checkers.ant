set height = 8;
set width = 32;
set start = top_left;
set tpf = 8;
set colors = bin;
set border = obs;

ant main {
	C0 = -T0;

	# M0: CX in previous tick
	# M1: last direction
	# M2: initial state
	D1 = or(M0, CX, -M2);
	D2 = and(D1, -M1);
	M2 = 1;

	# toggle: toggle last direction
	toggle = and(M0, -CX);
	M1 = xor(M1, toggle);

	M0 = and(-M0, CX);

	AX = CN0;
}
